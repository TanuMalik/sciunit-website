<!DOCTYPE html>
<html lang="en">

<head>
    <title>The Geotrust Project</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/jpg" href="/static/assets/images/new_geotrust_1lm_icon.ico" />
    <link href="https://fonts.googleapis.com/css?family=Lato|Work+Sans|Ubuntu+Mono" rel="stylesheet">
    <!-- Link to Bootstrap usind CDN -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ"
        crossorigin="anonymous">
    <link rel="stylesheet" href="/static/css/normalize.css">



</head>

<body data-spy="scroll" data-target="#myScrollspy" data-offset="15">
    <nav class="navbar navbar-toggleable-lg navbar-light bg-faded">
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <a href="/" class="navbar-brand">
        	<img src="/static/assets/images/new_GeoTrust.png" id="sciunit-logo" width="135" height="110" alt="Geotrust">
        </a>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class='nav-item'>
                    <a class="nav-link" href="/">Sciunit</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/install/">Install </a>
                </li>
                <li class="nav-item active-nav">
                    <a class="nav-link" href="#">Documentation </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/papers/">Papers</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/support">Support</a>
                </li>
            </ul>
        </div>
    </nav>
    <div class="container-fluid">
        <hr />
        <div class="row">
            <!-- Anchor links broke upon updating HTML. If still wanted, can go back and debug 
            <nav class="col-lg-2" id=myScrollspy>
                <ul class="nav nav-pills flex-column" data-spy="affix" data-offset-top="205" id="stickyContents">
                    <li><a href="#doc-overview">Overview</a></li>
                    <li><a href="#doc-getting-started">Getting Started</a></li>
                    <li><a href="#doc-install">Installation</a></li>
                    <li><a href="#doc-config">Configuration</a></li>
                    <li id="tutorial-link-parent"><a href="#doc-tutorial">Tutorials</a>
                        <ul id="tutorial-link">
                            <li><a href="#doc-tutorial-example1">Package one application</a></li>
                        </ul>

                        <li><a href="#doc-troubleshoot">Troubleshooting</a></li>
                        <li><a href="#doc-appendix">Appendix</a></li>
                </ul>
            </nav> -->
            <div class="col-lg-8 offset-lg-2">
                <br />
                <div class="row" id="documentation">
                    <div class="col-lg-12">
                        <div>
                            <h1 id="#doc-overview">A Brief Introduction to Sciunit</h1>
                            <p>From time to time, you may find that it is hard to verify or reproduce someone else’s research
                                results, even though they are only programs, data, and output. Programs have different ways
                                to build, may behave differently if not providing the author’s environment, can accept different
                                arguments at runtime, and all these factors contribute to the difficulties of trying out
                                others’ work. How about, starting from your next paper, you publish the article along with
                                a research object, “sciunit”, to encapsulate all the workflows you plan to demonstrate, allowing
                                the readers and the reviewer try out your work?</p>
                            <h2 id="basic-concepts">Basic concepts</h2>
                            <h3 id="sciunit">Sciunit</h3>
                            <p>“Sciunit” is both the name of the type of research object we defined and also the name of software
                                we create, manage, and share <em>sciunits</em>. A sciunit is consist of multiple <em>executions</em>.
                                Each execution refers to an execution of a command under Linux. The command may refer to
                                a single binary, may start with the name of a specific virtual machine for managed languages
                                such as “java”, or maybe a shell script containing multiple commands to run. An execution
                                may also be a series of terminal input you interact with a UNIX shell. In all cases, the
                                runtime dependencies of execution are figured out during a “capturing” phase, saved to a
                                sciunit, and can be “repeated” later on a different machine without pulling in any dependencies
                                of the execution.</p>
                            <p>Each execution is assigned an execution id, starting from “<code>e1</code>”. In your paper, you
                                describe each workflow you want to discuss and reference it using the corresponding execution
                                id in a sciunit, just like referencing a figure using a numerical figure id.</p>
                            <h3 id="workspace">Workspace</h3>
                            <p>The <em>sciunit</em>(1) command-line tool owns the directory <code>~/sciunit</code>. A workspace
                                for a sciunit is a subdirectory under <code>~/sciunit</code>. Command</p>
                            <pre><code>sciunit create Project1
                                </code></pre>
                            <p>creates and opens an empty sciunit called “Project1”, where <code>~/sciunit/Project1</code> is
                                its workspace. You can verify these with</p>
                            <pre><code>&gt; sciunit show
sciunit: show: sciunit 'Project1' is empty
                                </code></pre>
                            <p>You can switch among multiple workspaces with the <code>open</code> command,</p>
                            <pre><code>sciunit open Project2
                                </code></pre>
                            <p>or load a sciunit into a workspace and then open it. The following chapters have more forms of
                                the <code>open</code> command to show.</p>
                            <h2 id="capturing-and-testing-your-program">Capturing and testing your program</h2>
                            <p>Let’s start with a “Hello World” program in a shell script.</p>
                            <pre><code>&gt; cat hello.sh
#!/bin/sh
echo 'hello, world'
                                </code></pre>
                            <p>We can run this program</p>
                            <pre><code>&gt; ./hello.sh
hello, world
                                </code></pre>
                            <p>Now we try to capture this program with <code>sciunit</code>. Assume that we just created a new
                                sciunit called “Project1”, then do</p>
                            <pre><code>&gt; sciunit exec ./hello.sh
hello, world
                                </code></pre>
                            <p>Now this program, along with its all dependencies, have been captured as “<code>e1</code>” in
                                “Project1”. The “show” command can display the details of the last captured execution:</p>
                            <pre><code>&gt; sciunit show
id: e1
sciunit: Project1
command: ./hello.sh
size: 2.82 MB
started: 2017-10-10 08:42
                                </code></pre>
                            <p>As we claimed, this execution can be repeated on a different machine. We will do so in the remaining
                                chapters, but before that, we should test it locally:</p>
                            <pre><code>&gt; sciunit repeat e1
hello, world
                                </code></pre>
                            <p>If you investigate into the workspace</p>
                            <pre><code>&gt; ls ~/sciunit/Project1/
cde-package  e1.json  sciunit.db  vvpkg.bin  vvpkg.dbThere is an available update.
                                </code></pre>
                            <p>, you will find a directory named “cde-package” and a few other files. The “cde-package” is a
                                temporary directory which consists all necessary files required for this execution to repeat;
                                for example, you can even find a “libc.so.6” somewhere under this directory. The rest of
                                the files are the underlying implementation for the conceptual “sciunit”.</p>
                            <p>Now let’s try a different way to capture executions – capture as you go.</p>
                            <pre><code>&gt; sciunit exec -i
Interactive capturing started; press Ctrl-D to end
&gt;
                                </code></pre>
                            <p>Wait, that’s it? No, you are merely inside a subshell, so that all the commands you run from
                                now on will be captured before exiting. For example,</p>
                            <pre><code>&gt; echo 'hello'
hello
&gt; ./hello.sh
hello, world
                                </code></pre>
                            <p>Now press “Ctrl-D”,</p>
                            <pre><code>&gt; exit
Interactive capturing ended
                                </code></pre>
                            <p>These all become execution “<code>e2</code>”, and you can repeat it as well.</p>
                            <p>So far, we obtained 2 executions within the sciunit. You can list them with the <code>list</code>command,</p>
                            <pre><code>&gt; sciunit list
e1 Oct 10 08:42 ./hello.sh
e2 Oct 10 11:00
                                </code></pre>
                            <p>, or remove one of them with the <code>rm</code> command. Note that after a removal all the remaining
                                executions retain their current execution ids, and new executions will be assigned ids which
                                are higher than the remaining ones.</p>
                            <h2 id="continue-your-work-on-another-machine">Continue your work on another machine</h2>
                            <p>While developing your paper, you might want to capture more executions on another machine, testing
                                your sciunit in another environment, or maybe share it with a coauthor. Conceptually, you
                                want to copy &amp; paste, remotely. The easiest way is to use the <code>copy</code> command:</p>
                            <pre><code>&gt; sciunit copy
mSLLTj#
                                </code></pre>
                            <p>Give it a second, and it returns a code. You can then “paste” the sciunit over the Internet by
                                running</p>
                            <pre><code>sciunit open mSLLTj#
                                </code></pre>
                            <p>on the target machine. The heavy lifting utilizes the <a href="https://file.io" target="_blank">file.io</a> 
                                service. The code is only valid for one day. Once pasted, the code is gone.</p>
                            <p>If you investigate the <code>~/sciunit</code> directory on the machine which you initiated the
                                copy,</p>
                            <pre><code>&gt; ls ~/sciunit
Project1  Project1.zip
                                </code></pre>
                            <p>you will find a new zip file. Easy to imagine, it is a zipped version of the sciunit “Project1”.
                                The <code>open</code> command can also open a zipped sciunit. So if you do not want to use
                                <a href="https://file.io" target="_blank">file.io</a>, you can, instead, use the <code>sciunit copy -n</code> 
                                command to generate this file, and deliver the file to some other machine or someone else.</p>
                            <h2 id="prepare-your-paper-for-review">Prepare your paper for review</h2>
                                <p>The zip file mentioned above is the research object you are going to publish along with your
                                    paper. You can manually select and upload such a file on the research objects sharing
                                    websites, however, if you are using <a href="https://www.hydroshare.org/" target="_blank">HydroShare</a>,
                                    maintaining and updating your draft articles can be drastically simplified with the <em>sciunit</em>(1)
                                    tool.</p>
                                <p>Issue the following command to create a new article with the current sciunit:</p>
                                <pre><code>sciunit push new --setup hs
                                </code></pre>
                                <p>“new” is a codename for your article. Codenames are useful for maintaining multiple articles
                                    you created from the same sciunit, and you should pick a codename to describe an article’s
                                    use, such as “debug”. “hs” is short for “hydroshare” to indicate the service you are
                                    talking to.</p>
                                <p>The above command prompts you for</p>
                                <pre><code>Please go to the following link and authorize access:
                                
https://www.hydroshare.org/o/authorize/?response_type=code&amp;client_id=vG5R4zZFO6uJZBj3m0DWtUK6Va44jTQ4KoqtaLpn&amp;redirect_uri=https:%2F%2Fsciunit.run%2Fcb&amp;state=RCeAb6zxbEuw6yHQPDpWu26iHQIcan
                                
Paste the authorization code:
                                </code></pre>
                                <p>Here we are running OAuth2 flow for HydroShare. After you done authentication in a web browser
                                    and pasted in the auth code,</p>
                                <pre><code>Paste the authorization code: AoxTbXnjzTfIa3OP5d5unxImPn0Noc
Logged in as "Username &lt;user@email.com&gt;"
Title for the new article: New Article for Project1
new: 8.93MB [00:01, 4.72MB/s]
                                </code></pre>
                                <p>input the title for the article and wait for the upload to finish. Now you can go to <a href="https://www.hydroshare.org/my-resources/"
                                        target="_blank">https://www.hydroshare.org/my-resources/</a> to view your new article
                                    on HydroShare. A newly created article lacks information for publication and is private.</p>
                                <p>After each successful “push”, the codename involved is recorded for the next</p>
                                <pre><code>sciunit push
                                </code></pre>
                                <p>command to pick up. So after you made a few changes to the current sciunit, such as captured
                                    a new execution, the above command can silently keep your article on HydroShare up-to-date.
                                    However, if you run</p>
                                <pre><code>&gt; sciunit push new --setup hs
Logged in as "Username &lt;user@email.com&gt;"
Create a new version of the article "New Article for Project1"? [y/N]
                                </code></pre>
                                <p>again, you are creating another new article rather than updating the existing one. If you
                                    answer ‘<code>y</code>’, the article will be a new “version” (HydroShare feature) of
                                    the existing one; if you answer ‘<code>n</code>’, the new article can have a different
                                    title. In the case that you accidentally run into this and cannot answer a prompt, just
                                    press “Ctrl-D” to exit the flow.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <br>
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 offset-lg-2 col-md-12">
                    <div class="navbar-fixed-bottom d-flex flex-row flex-wrap justify-content-between">
                        <a class="p-2" href="/">Home</a>
                        <a class="p-2" href="/install/">Install</a>
                        <a class="p-2" href="#">Documentation</a>
                        <a class="p-2" href="/papers/">Papers</a>
                        <a class="p-2" href="/support/">Support</a>
                    </div>
                    <p> The Geotrust Project is supported by the National Science Foundation.</p>
                </div>
            </div>
        </div>
    </footer>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn"
        crossorigin="anonymous"></script>
</body>
<script src="/static/js/app.js"></script>

</html>